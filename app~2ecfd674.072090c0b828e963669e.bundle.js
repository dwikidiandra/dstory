"use strict";(self.webpackChunkapp_starter_project_with_webpack=self.webpackChunkapp_starter_project_with_webpack||[]).push([[237],{42:(e,n,t)=>{t.d(n,{A:()=>l});var r=t(467),a=t(29),s=t(901),o=t(756),i=t.n(o),c=t(760),l=function(){return(0,s.A)((function e(){(0,a.A)(this,e),this._presenter=new c.A(this)}),[{key:"render",value:(n=(0,r.A)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._presenter.isUserLoggedIn()){e.next=2;break}return e.abrupt("return",'\n        <section class="container">\n          <div class="already-logged-in">\n            <h2>You are already logged in</h2>\n            <p>If you want to register a new account, please logout first.</p>\n            <a href="#/" class="button primary">Go to Home</a>\n          </div>\n        </section>\n      ');case 2:return e.abrupt("return",'\n      <section class="auth-page container">\n        <div class="auth-card">\n          <h1>Register</h1>\n          \n          <form id="register-form" class="auth-form">\n            <div class="form-group">\n              <label for="name">Full Name</label>\n              <input \n                type="text" \n                id="name" \n                name="name" \n                required\n                placeholder="Your full name"\n              >\n            </div>\n            \n            <div class="form-group">\n              <label for="email">Email</label>\n              <input \n                type="email" \n                id="email" \n                name="email" \n                required\n                placeholder="your@email.com"\n              >\n            </div>\n            \n            <div class="form-group">\n              <label for="password">Password</label>\n              <input \n                type="password" \n                id="password" \n                name="password" \n                required\n                placeholder="Your password (min 8 characters)"\n                minlength="8"\n              >\n            </div>\n            \n            <div class="form-actions">\n              <button type="submit" class="button primary">\n                <i class="fas fa-user-plus"></i> Register\n              </button>\n            </div>\n            \n            <div class="auth-footer">\n              Already have an account? <a href="#/login">Login</a>\n            </div>\n          </form>\n        </div>\n      </section>\n    ');case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"afterRender",value:(e=(0,r.A)(i().mark((function e(){var n,t=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._presenter.isUserLoggedIn()){e.next=2;break}return e.abrupt("return");case 2:(n=document.getElementById("register-form")).addEventListener("submit",function(){var e=(0,r.A)(i().mark((function e(r){var a,s,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a=document.getElementById("name").value,s=document.getElementById("email").value,o=document.getElementById("password").value,(c=n.querySelector('button[type="submit"]')).disabled=!0,c.innerHTML='<i class="fas fa-spinner fa-spin"></i> Registering...',e.next=9,t._presenter.register({name:a,email:s,password:o});case 9:c.disabled=!1,c.innerHTML='<i class="fas fa-user-plus"></i> Register';case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"showSuccessAndRedirect",value:function(){alert("Registration successful! Please login with your credentials."),window.location.hash="#/login"}},{key:"showError",value:function(e){alert("Registration failed: ".concat(e))}}]);var e,n}()},165:(e,n,t)=>{t.d(n,{A:()=>l});var r=t(467),a=t(29),s=t(901),o=t(756),i=t.n(o),c=t(166),l=function(){return(0,s.A)((function e(){(0,a.A)(this,e),this._presenter=new c.A(this)}),[{key:"render",value:(n=(0,r.A)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",'\n      <section class="bookmarks container">\n        <div class="bookmarks-header">\n          <h1>Your Bookmarked Stories</h1>\n        </div>\n        \n        <div class="bookmarks-list" id="bookmarks-list">\n          <div class="loading">Loading bookmarks...</div>\n        </div>\n      </section>\n    ');case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"afterRender",value:(e=(0,r.A)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._presenter.getAllBookmarks();case 2:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"showBookmarks",value:function(e){var n=this,t=document.getElementById("bookmarks-list"),a=Array.isArray(e)?e:[];0!==a.length?(t.innerHTML=a.map((function(e){return'\n        <article class="story-card">\n          <div class="story-image">\n            <img src="'.concat(e.photoUrl,'" alt="').concat(e.description,'" loading="lazy">\n          </div>\n          <div class="story-content">\n            <h2><a href="#/stories/').concat(e.id,'">').concat(e.name,'\'s Story</a></h2>\n            <p class="story-date">').concat(new Date(e.createdAt).toLocaleDateString(),'</p>\n            <p class="story-desc">').concat(e.description,"</p>\n            ").concat(e.lat&&e.lon?'\n              <p class="story-location">\n                <i class="fas fa-map-marker-alt"></i> \n                '.concat(e.lat.toFixed(4),", ").concat(e.lon.toFixed(4),"\n              </p>\n            "):"",'\n            <button class="button danger small remove-bookmark" data-id="').concat(e.id,'">\n              <i class="fas fa-trash"></i> Remove Bookmark\n            </button>\n          </div>\n        </article>\n      ')})).join(""),document.querySelectorAll(".remove-bookmark").forEach((function(e){e.addEventListener("click",function(){var e=(0,r.A)(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.closest("button").dataset.id,e.next=3,n._presenter.toggleBookmark({id:r});case 3:return e.next=5,n._presenter.getAllBookmarks();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}))):t.innerHTML='\n        <div class="empty">\n          <i class="fas fa-bookmark"></i>\n          <p>No bookmarked stories yet</p>\n        </div>\n      '}},{key:"showBookmarkAdded",value:function(e){}},{key:"showBookmarkRemoved",value:function(e){}},{key:"showError",value:function(e){document.getElementById("bookmarks-list").innerHTML='\n      <div class="error">\n        <i class="fas fa-exclamation-triangle"></i>\n        <p>'.concat(e||"Failed to load bookmarks","</p>\n      </div>\n    ")}}]);var e,n}()},209:(e,n,t)=>{t.d(n,{A:()=>l});var r=t(467),a=t(29),s=t(901),o=t(756),i=t.n(o),c=t(481),l=function(){return(0,s.A)((function e(){(0,a.A)(this,e),this._page=1,this._size=10,this._presenter=new c.A(this)}),[{key:"render",value:(t=(0,r.A)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",'\n      <section class="stories container">\n        <div class="stories-header">\n          <h1>Dicoding Stories</h1>\n          <a href="#/stories/add" class="button primary">\n            <i class="fas fa-plus"></i> Add Story\n          </a>\n        </div>\n        \n        <div class="stories-list" id="stories-list"></div>\n        \n        <div class="pagination">\n          <button id="prev-page" class="button secondary" disabled>\n            <i class="fas fa-chevron-left"></i> Previous\n          </button>\n          <span>Page '.concat(this._page,'</span>\n          <button id="next-page" class="button secondary">\n            Next <i class="fas fa-chevron-right"></i>\n          </button>\n        </div>\n      </section>\n    '));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"afterRender",value:(n=(0,r.A)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._loadStories();case 2:this._setupPagination();case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_loadStories",value:(e=(0,r.A)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._presenter.getAllStories({page:this._page,size:this._size});case 2:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"showStories",value:function(e){var n=this,t=document.getElementById("stories-list");0!==e.length?(t.innerHTML=e.map((function(e){return'\n        <article class="story-card">\n          <div class="story-image">\n            <img src="'.concat(e.photoUrl,'" alt="').concat(e.description,'" loading="lazy">\n          </div>\n          <div class="story-content">\n            <h2><a href="#/stories/').concat(e.id,'">').concat(e.name,'\'s Story</a></h2>\n            <p class="story-date">').concat(n._presenter.formatDate(e.createdAt),'</p>\n            <p class="story-desc">').concat(e.description,"</p>\n            ").concat(e.lat&&e.lon?'\n              <p class="story-location">\n                <i class="fas fa-map-marker-alt"></i> \n                '.concat(e.lat.toFixed(4),", ").concat(e.lon.toFixed(4),"\n              </p>\n            "):"",'\n            <a href="#/stories/').concat(e.id,'" class="button small">Read More</a>\n          </div>\n        </article>\n      ')})).join(""),document.getElementById("prev-page").disabled=1===this._page):t.innerHTML='<div class="empty">No stories found. Be the first to share!</div>'}},{key:"showError",value:function(e){document.getElementById("stories-list").innerHTML='\n      <div class="error">\n        Failed to load stories. '.concat(e,"\n      </div>\n    ")}},{key:"_setupPagination",value:function(){var e=this;document.getElementById("prev-page").addEventListener("click",(0,r.A)(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e._page>1)){n.next=4;break}return e._page--,n.next=4,e._loadStories();case 4:case"end":return n.stop()}}),n)})))),document.getElementById("next-page").addEventListener("click",(0,r.A)(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e._page++,n.next=3,e._loadStories();case 3:case"end":return n.stop()}}),n)}))))}}]);var e,n,t}()},241:(e,n,t)=>{t.d(n,{A:()=>l});var r=t(467),a=t(29),s=t(901),o=t(756),i=t.n(o),c=t(577),l=function(){return(0,s.A)((function e(){(0,a.A)(this,e),this._presenter=new c.A(this)}),[{key:"render",value:(n=(0,r.A)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._presenter.isUserLoggedIn()){e.next=3;break}return window.location.hash="#/login",e.abrupt("return","");case 3:return e.abrupt("return",'\n      <section class="hero">\n        <div class="hero-content">\n          <h1>Welcome, '.concat(this._presenter.getUserName(),'!</h1>\n          <p>Kindly share your most recent learning journey on Dicoding</p>\n          <a href="#/stories/add" class="button primary">Add Your Story</a>\n        </div>\n      </section>\n\n      <section class="features container">\n        <div class="feature-card">\n          <i class="fas fa-book-open"></i>\n          <h3>Your Stories</h3>\n          <p>View and manage all the stories you have shared</p>\n          <a href="#/stories" class="button small">View Stories</a>\n        </div>\n        <div class="feature-card">\n          <i class="fas fa-map-marked-alt"></i>\n          <h3>Story Map</h3>\n          <p>Explore stories from various locations</p>\n          <a href="#/map" class="button small">View Map</a>\n        </div>\n        <div class="feature-card">\n          <i class="fas fa-cog"></i>\n          <h3>Account</h3>\n          <p>Manage the settings of your account</p>\n          <a href="#" id="logout-btn" class="button small">Logout</a>\n        </div>\n      </section>\n    '));case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"afterRender",value:(e=(0,r.A)(i().mark((function e(){var n,t=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(n=document.getElementById("logout-btn"))||void 0===n||n.addEventListener("click",(function(e){e.preventDefault(),t._presenter.logout()}));case 1:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})}]);var e,n}()},561:(e,n,t)=>{t.d(n,{A:()=>p});var r=t(467),a=t(29),s=t(901),o=t(756),i=t.n(o),c=t(481),l=t(24),u=t(166),d=t(344),p=function(){return(0,s.A)((function e(){(0,a.A)(this,e),this._storyId=null,this._presenter=new c.A(this),this._bookmarkDatabase=l.A,this._bookmarkPresenter=new u.A(this),this._isBookmarked=!1}),[{key:"render",value:(n=(0,r.A)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.location.hash.split("/"),this._storyId=n[n.length-1],e.abrupt("return",'\n      <section class="story-detail container">\n        <div class="back-link">\n          <a href="#/stories"><i class="fas fa-arrow-left"></i> Back to Stories</a>\n        </div>\n        \n        <div id="story-content">\n          <div class="loading">Loading story...</div>\n        </div>\n      </section>\n    ');case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"afterRender",value:(e=(0,r.A)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._presenter.getStoryDetail(this._storyId);case 3:return n=e.sent,e.next=6,this._bookmarkDatabase.isBookmarked(this._storyId);case 6:this._isBookmarked=e.sent,this.showStoryDetail(n),this._setupBookmarkButton(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),this.showError(e.t0.message);case 14:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(){return e.apply(this,arguments)})},{key:"showStoryDetail",value:function(e){var n=document.getElementById("story-content");if(!e)throw new Error("Story not found");n.innerHTML='\n      <article class="story-detail-card">\n        <div class="story-detail-image">\n          <img src="'.concat(e.photoUrl,'" alt="').concat(e.description||"Story image",'" loading="lazy">\n        </div>\n        <div class="story-detail-info">\n          <div class="story-header">\n            <h1>').concat(e.name||"Anonymous",'\'s Story</h1>\n            <button id="bookmark-btn" class="button ').concat(this._isBookmarked?"danger":"secondary",'" type="button">\n              <i class="fas fa-bookmark"></i> ').concat(this._isBookmarked?"Bookmarked":"Bookmark",'\n            </button>\n          </div>\n          <p class="story-meta">\n            <span class="story-date">\n              <i class="far fa-calendar-alt"></i> ').concat(this._presenter.formatDate(e.createdAt)||"No date available","\n            </span>\n            ").concat(e.lat&&e.lon?'\n              <span class="story-location">\n                <i class="fas fa-map-marker-alt"></i> \n                '.concat(e.lat.toFixed(4),", ").concat(e.lon.toFixed(4),"\n              </span>\n            "):"",'\n          </p>\n          <div class="story-description">\n            ').concat(e.description||"No description available",'\n          </div>\n          <div class="story-actions">\n            <a href="#/stories" class="button secondary">\n              <i class="fas fa-arrow-left"></i> Back to Stories\n            </a>\n            <a href="#/bookmarks" class="button primary">\n              <i class="fas fa-bookmark"></i> View Bookmarks\n            </a>\n          </div>\n        </div>\n      </article>\n      \n      ').concat(e.lat&&e.lon?'\n        <div class="story-map" id="story-map"></div>\n      ':"","\n    "),e.lat&&e.lon&&this._initMap(e.lat,e.lon)}},{key:"_setupBookmarkButton",value:function(e){var n=this,t=document.getElementById("bookmark-btn");t&&t.addEventListener("click",function(){var a=(0,r.A)(i().mark((function r(a){var s;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a.preventDefault(),r.next=4,n._bookmarkPresenter.toggleBookmark(e);case 4:s=r.sent,t.innerHTML='<i class="fas fa-bookmark"></i> '.concat(s?"Bookmarked":"Bookmark"),t.className="button ".concat(s?"danger":"secondary"),d.A.showNotification(s?"Bookmark Added":"Bookmark Removed",{body:'Story "'.concat(e.description.substring(0,30),'..." ').concat(s?"added to":"removed from"," bookmarks")}),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),console.error("Error toggling bookmark:",r.t0),n.showError("Failed to update bookmark. Please try again.");case 14:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}())}},{key:"showError",value:function(e){document.getElementById("story-content").innerHTML='\n      <div class="error">\n        <i class="fas fa-exclamation-triangle"></i>\n        <h2>Failed to load story</h2>\n        <p>'.concat(e||"Please try again later",'</p>\n        <a href="#/stories" class="button primary">Back to Stories</a>\n      </div>\n    ')}},{key:"_initMap",value:function(e,n){Promise.resolve().then(t.t.bind(t,862,23)).then((function(t){var r=t.map("story-map").setView([e,n],13);t.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(r);var a=t.marker([e,n]).addTo(r),s=t.divIcon({className:"custom-marker",html:'\n          <div class="marker-pin"></div>\n          <div class="marker-dot"></div>\n        ',iconSize:[30,42],iconAnchor:[15,42]});a.setIcon(s),a.bindPopup("Story location").openPopup()}))}},{key:"showBookmarkAdded",value:function(e){console.log("Bookmark added for story: ".concat(e.id))}},{key:"showBookmarkRemoved",value:function(e){console.log("Bookmark removed for story: ".concat(e.id))}}]);var e,n}()},614:(e,n,t)=>{t.d(n,{A:()=>l});var r=t(467),a=t(29),s=t(901),o=t(756),i=t.n(o),c=t(760),l=function(){return(0,s.A)((function e(){(0,a.A)(this,e),this._presenter=new c.A(this)}),[{key:"render",value:(n=(0,r.A)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._presenter.isUserLoggedIn()){e.next=2;break}return e.abrupt("return",'\n        <section class="container">\n          <div class="already-logged-in">\n            <h2>You are already logged in</h2>\n            <p>You can now add stories and receive notifications.</p>\n            <a href="#/" class="button primary">Go to Home</a>\n          </div>\n        </section>\n      ');case 2:return e.abrupt("return",'\n      <section class="auth-page container">\n        <div class="auth-card">\n          <h1>Login</h1>\n          \n          <form id="login-form" class="auth-form">\n            <div class="form-group">\n              <label for="email">Email</label>\n              <input \n                type="email" \n                id="email" \n                name="email" \n                required\n                placeholder="your@email.com"\n              >\n            </div>\n            \n            <div class="form-group">\n              <label for="password">Password</label>\n              <input \n                type="password" \n                id="password" \n                name="password" \n                required\n                placeholder="Your password"\n                minlength="8"\n              >\n            </div>\n            \n            <div class="form-actions">\n              <button type="submit" class="button primary">\n                <i class="fas fa-sign-in-alt"></i> Login\n              </button>\n            </div>\n            \n            <div class="auth-footer">\n              Don\'t have an account? <a href="#/register">Register</a>\n            </div>\n          </form>\n        </div>\n      </section>\n    ');case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"afterRender",value:(e=(0,r.A)(i().mark((function e(){var n,t=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._presenter.isUserLoggedIn()){e.next=2;break}return e.abrupt("return");case 2:(n=document.getElementById("login-form")).addEventListener("submit",function(){var e=(0,r.A)(i().mark((function e(r){var a,s,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a=document.getElementById("email").value,s=document.getElementById("password").value,(o=n.querySelector('button[type="submit"]')).disabled=!0,o.innerHTML='<i class="fas fa-spinner fa-spin"></i> Logging in...',e.next=8,t._presenter.login({email:a,password:s});case 8:o.disabled=!1,o.innerHTML='<i class="fas fa-sign-in-alt"></i> Login';case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"redirectToHome",value:function(){window.location.hash="#/"}},{key:"showError",value:function(e){alert("Login failed: ".concat(e))}}]);var e,n}()},697:(e,n,t)=>{t.d(n,{A:()=>d});var r=t(467),a=t(29),s=t(901),o=t(756),i=t.n(o),c=t(965),l=t(862),u=t.n(l),d=function(){return(0,s.A)((function e(){(0,a.A)(this,e),this._map=null,this._markers=[],this._baseLayers={},this._overlays={}}),[{key:"render",value:(o=(0,r.A)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",'\n      <section class="story-map-page container">\n        <h1>Stories Map</h1>\n        <p>Discover Dicoding stories from various regions and locations</p>\n        <div id="map" class="story-map-container"></div>\n        <div id="layer-control" class="layer-control"></div>\n      </section>\n    ');case 1:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(t=(0,r.A)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initMap();case 2:return e.next=4,this._loadStories();case 4:this._setupLayerControl();case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_initMap",value:(n=(0,r.A)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._map=u().map("map").setView([-2.5489,118.0149],5),this._baseLayers={OpenStreetMap:u().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),Satellite:u().tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),Topography:u().tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'})},this._baseLayers.OpenStreetMap.addTo(this._map);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_loadStories",value:(e=(0,r.A)(i().mark((function e(){var n,t,r,a=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.A.getAllStories({location:1});case 3:n=e.sent,this._markers.forEach((function(e){return a._map.removeLayer(e)})),this._markers=[],t=function(){return u().divIcon({html:'\n            <div class="custom-marker">\n              <div class="marker-pin"></div>\n              <div class="marker-dot"></div>\n            </div>\n          ',className:"custom-marker-container",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]})},r=u().layerGroup(),n.forEach((function(e){if(e.lat&&e.lon){var n=u().marker([e.lat,e.lon],{icon:t(),alt:"".concat(e.name,"'s Story Location")}).bindPopup('\n            <div class="map-popup">\n              <b>'.concat(e.name,"'s Story</b>\n              <p>").concat(e.description.substring(0,50),'...</p>\n              <a href="#/stories/').concat(e.id,'">Read more</a>\n            </div>\n          '));r.addLayer(n),a._markers.push(n)}})),r.addTo(this._map),this._overlays={"Story Markers":r},this._markers.length>0&&this._map.fitBounds(r.getBounds()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Failed to load stories:",e.t0);case 17:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(){return e.apply(this,arguments)})},{key:"_setupLayerControl",value:function(){u().control.layers(this._baseLayers,this._overlays,{position:"topright",collapsed:!1}).addTo(this._map)}}]);var e,n,t,o}()}}]);
//# sourceMappingURL=app~2ecfd674.072090c0b828e963669e.bundle.js.map